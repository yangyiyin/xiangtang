<extend name="Public/base"/>

<block name="body">
<script type="text/javascript" src="__STATIC__/uploadify/jquery.uploadify.min.js"></script>
<script type="text/javascript" src="__STATIC__/popwin.js"></script>   
<style type="text/css">#dialog{display:none;}</style>
	<div class="g-wrap">
		<!-- 按钮工具栏 -->
		<div class="u-tab">
		    <ul class="cc tab-nav">
				<li><a href="{:U('index')}">所有部门</a></li>
				<if condition="I('get.id')">
					<li class="current"><a href="javascript:;">编辑部门</a></li>
					<else/>
					<li class="current"><a href="javascript:;">添加部门</a></li>
				</if>
		    </ul>
		</div>
		<!-- 数据表格 -->
		<div class="tab-content table_list">
		<!-- 表单 -->
		<form id="form" action="{:U('update')}/id/{:I('get.id')}" method="post" class="form-horizontal">
				<div id="tab">
					<table class="" width="100%">
				    <tbody>
					<tr >
						<td width="20%"><label class="item-label">*机构</label></td>
						<td width="80%">
							<select name="type" class="type">
								{$cat_options}
							</select>
						</td>
					</tr>
					<tr class="sub_type" <if condition="!in_array('sub_type',$fields)">style="display:none"</if>>
						<td width="20%"><label class="item-label">*子类型</label></td>
						<td width="80%">
							<select name="sub_type">
								{$bank_type_options}
							</select>
						</td>
					</tr>

					<tr class="sub_type_insurance_property" <if condition="!in_array('sub_type_insurance_property',$fields)">style="display:none"</if>>
					<td width="20%"><label class="item-label">*子类型</label></td>
					<td width="80%">
						<select name="sub_type_insurance_property">
							<option value="">无</option>
							{$sub_type_insurance_property_options}
						</select>
					</td>
					</tr>

							<tr class="all_name">
					            <td width="20%"><label class="item-label">*全称(添加后不可修改)</label></td>
					            <td width="80%">
									<if condition="I('get.id')">

										<input type="text" class="input input-medium" style="background: #ddd" disabled="disabled" name="all_name" value="{$info.all_name}">
										<else/>
										<input type="text" class="input input-medium" name="all_name" value="{$info.all_name}">
									</if>

								</td>
							</tr>
					<tr class="all_name">
						<td width="20%"><label class="item-label">*别称(简称)</label></td>
						<td width="80%">
							<input type="text" class="input input-medium" name="other_name" value="{$info.other_name}">
						</td>
					</tr>

							<tr class="address">
								<td width="20%"><label class="item-label">*地址</label></td>
								<td width="80%">
			                                <input type="text" class="input input-medium" name="address" value="{$info.address}">
								</td>
							</tr>

							<tr class="principal">
								<td width="20%"><label class="item-label">*主要负责人</label></td>
								<td width="80%">
									<input type="text" class="input input-medium" name="principal" value="{$info.principal}">
								</td>
							</tr>

							<tr class="phone">
								<td ><label class="item-label">*电话</label></td>
								<td >
									<input type="text" class="input input-medium" name="phone" value="{$info.phone}">
								</td>
							</tr>

					<tr class="fixed_phone">
						<td ><label class="item-label">*固定电话</label></td>
						<td>
							<input type="text" class="input input-medium" name="fixed_phone" value="{$info.fixed_phone}">
						</td>
					</tr>

					<tr class="tel_phone">
						<td ><label class="item-label">*手机</label></td>
						<td >
							<input type="text" class="input input-medium" name="tel_phone" value="{$info.tel_phone}">
						</td>
					</tr>
					<tr class="filler_man">
						<td ><label class="item-label">*报表联系人(多个姓名用英文的逗号隔开)</label></td>
						<td >
							<input type="text" class="input input-medium" name="filler_man" value="{$info.filler_man}">
						</td>
					</tr>
					<tr  class="filler_man_tel">
						<td ><label class="item-label">*报表联系人手机号(多个号码用英文的逗号隔开)</label></td>
						<td >
							<input type="text" class="input input-medium" name="filler_man_tel" value="{$info.filler_man_tel}">
						</td>
					</tr>
					<tr class="total_assets" <if condition="!in_array('total_assets',$fields)">style="display:none"</if>>
						<td ><label class="item-label">*总资产(万元)</label></td>
						<td >
							<input type="text" class="input input-medium" name="total_assets" value="{$info.total_assets}">
						</td>
					</tr>
					<tr class="staffs" <if condition="!in_array('staffs',$fields)">style="display:none"</if>>
						<td ><label class="item-label">*员工人数</label></td>
						<td >
							<input type="text" class="input input-medium" name="staffs" value="{$info.staffs}">
						</td>
					</tr>
					<tr class="capital" <if condition="!in_array('capital',$fields)">style="display:none"</if>>
						<td ><label class="item-label">*注册资本</label></td>
						<td >
							<input type="text" class="input input-medium" name="capital" value="{$info.capital}">
						</td>
					</tr>

					<tr class="capital_submit" <if condition="!in_array('capital_submit',$fields)">style="display:none"</if>>
						<td ><label class="item-label">*实缴注册资本</label></td>
						<td >
							<input type="text" class="input input-medium" name="capital_submit" value="{$info.capital_submit}">
						</td>
					</tr>

					<tr class="equity" <if condition="!in_array('equity',$fields)">style="display:none"</if>>
						<td ><label class="item-label">*所有者权益(万元)</label></td>
						<td >
							<input type="text" class="input input-medium" name="equity" value="{$info.equity}">
						</td>
					</tr>

					<tr class="build_time" <if condition="!in_array('build_time',$fields)">style="display:none"</if>>
						<td ><label class="item-label">*成立时间</label></td>
						<td >
							<input type="text" class="input input-medium time" name="build_time" value="{$info.build_time|time_to_date}">
						</td>
					</tr>


					</tbody>
				    </table> 
			     </div>

			<div class="btn_wrap">
	          <div class="btn_wrap_pd">
	            	<button class="btn submit-btn J_ajax_post" id="submit" type="submit" target-form="form-horizontal">确 定</button>
				  <button class="btn btn-return" onclick="javascript:history.back(-1);return false;">返 回</button>
	          </div>
	        </div>
	    </form>
	    </div>
	</div>
</div>

</block>
<block name="script">
<link href="__STATIC__/datetimepicker/css/datetimepicker.css" rel="stylesheet" type="text/css">
<php>if(C('COLOR_STYLE')=='blue_color') echo '<link href="__STATIC__/datetimepicker/css/datetimepicker_blue.css" rel="stylesheet" type="text/css">';</php>
<link href="__STATIC__/datetimepicker/css/dropdown.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="__STATIC__/datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="__STATIC__/datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
<script type="text/javascript">
$('#submit').click(function(){
	$('#form').submit();
});
$(function(){
	$("#xgwz").on('click' , function(){
		popWin.showWin("1000","600","请勾选出相关文章","{:U('article/mydocument?showids=true')}");
	});
    $('.time').datetimepicker({
        format: 'yyyy-mm-dd hh:ii',
        language:"zh-CN",
        minView:2,
        autoclose:true
    });
    showTab();

	$('.type').change(function() {
		function get_avalible_fields(type) {
			var fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel'];
			type = parseInt(type);
			switch (type) {
				case 1:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','sub_type_insurance_property'];
					break;
				case 2:
					break;
				case 3:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital','total_assets','staffs'];
					break;
				case 4:
					$fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital'];

					break;
				case 5:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital'];

					break;
				case 6:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital'];

					break;
				case 7:
					break;
				case 8:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital'];

					break;
				case 9:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital'];

					break;
				case 10:

					break;
				case 11:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','capital','build_time'];

					break;
				case 12:
					fields = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','sub_type'];

					break;
			}

			return fields;
		}
		var type = $(this).val();
		var fields = get_avalible_fields(type);
		console.log(fields);
		var fields_all = ['all_name','address','principal','phone','fixed_phone','tel_phone','filler_man','filler_man_tel','sub_type','sub_type_insurance_property','capital','build_time','total_assets','staffs','equity','capital_submit'];
		for (var i in fields_all){
			if ($.inArray(fields_all[i],fields) < 0) {
				//console.log(fields);
				$('.'+fields_all[i]).hide();
			} else {
				$('.'+fields_all[i]).show();
			}
		}


	})
});
</script>
</block>